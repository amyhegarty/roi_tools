# Neuorimaging Region of Interest Tools

Here contains a variety of ROI tools for neuroimaging analysis.

## Overlap Mapping Code
Overlap mapping code is a custom python tool used for visualization **only** of neuroimaging data. Using a subject specific threshold, this tool is designed to enable "apples-to-apples" comparison of subject activation maps across many subjects. Using a quantile thresholding method, we can ensure the same number of voxels are set above threshold across all subjects. Here a mask can be used to ensure the same number of voxels are kept above a threshold within a specific brain region. Full usage is shown below:
```
usage: overlap_mapping_code.py [-h] [--quantile QUANTILE] [--mask PATH]
                               [--dilate-kernel-type TYPE]
                               [--dilate-kernel-size SIZE]
                               [--dilate-kernel-file PATH] [-v]
                               INPUT-PATH OUTPUT-PATH

Overlap Mapping Code is a tool used to set custom thresholds for a set of
nifti images. Subject specific thresholds are generated by first setting a
common critera for all images, then applying a custom threshold. A mask can
also be provided to limit the \u201cscope\u201d of the threshold search to a certain
brain area. This gives the advantage that brain activation is scaled to ensure
activation in regions of interest.

positional arguments:
  INPUT-PATH            path to input 3D or 4D files to threshold
  OUTPUT-PATH           path to output directory location for results

optional arguments:
  -h, --help            show this help message and exit
  --quantile QUANTILE   Use a quantile as the image threshold [values should
                        be entered between 0-1] (default: None)
  --mask PATH           path to 3D nifti image mask used to restrict threshold
                        calculation (default: None)
  --dilate-kernel-type TYPE
                        specify kernel type used to dilate the boarder of
                        provided mask [options: 3D, 2D, box, boxv, gauss,
                        sphere, file...] (default: None)
  --dilate-kernel-size SIZE
                        specify kernel size used to dilate the boarder of
                        provided mask, must be supplied with kernal types
                        [box, boxv, gauss, sphere] (default: 0)
  --dilate-kernel-file PATH
                        specify external file as kernel (default: 0)
  -v, --verbosity

```

Outputs include:
```
filtered_func_data_QXXX.nii.gz: 
    output 4D image (using same name as input) with the quantile threshold applied
filtered_func_data_QXXX.csv:    
    tabular data file with the threshold applied to each 4D image, organized where the ith row corresponds to the ith volume in the 4D image
filtered_func_data_QXXX_pos_collated.nii.gz: 
    3D image with a count of all volumes with active voxels (output ranges from 0-# subjects, where each voxel's value is the # subjects with with activation above threshold at that voxel location). "pos" stands for the positive domain of the original image
filtered_func_data_QXXX_neg_collated.nii.gz: 
    3D image with a count of all volumes with active voxels (output ranges from 0-# subjects, where each voxel's value is the # subjects with with activation above threshold at that voxel location). "neg" stands for the negative domain of the original image
```
